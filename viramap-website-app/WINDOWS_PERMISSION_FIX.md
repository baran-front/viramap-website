# ๐ง ุฑุงูููุง ุฑูุน ุฎุทุงูุง Permission ุฏุฑ ููุฏูุฒ

## ๐ฏ ูุดฺฉู

ุฎุทุง ุฒุฑ ุฏุฑ ููุฏูุฒ ุฑุฎ ูโุฏูุฏ:

```
EPERM: operation not permitted, lstat '.next\dev\lock'
```

ุงู ุฎุทุง ูุนูููุงู ุฒูุงู ุฑุฎ ูโุฏูุฏ ฺฉู:
- ูพุฑูุณู Next.js ูููุฒ ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช
- ูุงู `.next\dev\lock` ุชูุณุท ูพุฑูุณู ุฏฺฏุฑ ููู ุดุฏู ุงุณุช
- ุฏุณุชุฑุณ ุจู ูุงู ูุญุฏูุฏ ุงุณุช

---

## โ ุฑุงูโุญูโูุง ุงุนูุงู ุดุฏู

### 1. **ุจูุจูุฏ ุงุณฺฉุฑูพุช clean-cache.js**

ุงุณฺฉุฑูพุช `clean-cache.js` ุจูุจูุฏ ุงูุชู ุงุณุช ุชุง:
- โ ุจุง ุฎุทุงูุง Permission ุฏุฑ ููุฏูุฒ ุจูุชุฑ ฺฉุงุฑ ฺฉูุฏ
- โ Retry mechanism ุจุฑุง ุญุฐู ูุงูโูุง ููู ุดุฏู
- โ ุญุฐู ุฎูุฏฺฉุงุฑ ูุงูโูุง lock
- โ ุงุณุชูุงุฏู ุงุฒ ุฏุณุชูุฑุงุช ุณุณุชู ุนุงูู ุฏุฑ ุตูุฑุช ูุงุฒ

### 2. **ุงุณฺฉุฑูพุช kill-next-process.js**

ุงุณฺฉุฑูพุช ุฌุฏุฏ ุจุฑุง ุจุณุชู ุฎูุฏฺฉุงุฑ ูพุฑูุณูโูุง Next.js:
```bash
pnpm kill-next
```

---

## ๐ ุฑูุดโูุง ุฑูุน ูุดฺฉู

### ุฑูุด 1: ุงุณุชูุงุฏู ุงุฒ ุงุณฺฉุฑูพุชโูุง ุฎูุฏฺฉุงุฑ (ูพุดููุงุฏ)

```bash
# 1. ุจุณุชู ูพุฑูุณูโูุง Next.js
pnpm kill-next

# 2. ูพุงฺฉ ฺฉุฑุฏู cache
pnpm clean-cache

# 3. ุงุฌุฑุง ูุฌุฏุฏ ูพุฑูฺู
pnpm dev
```

### ุฑูุด 2: ุฑูุด ุฏุณุช

#### ูุฑุญูู 1: ุจุณุชู ูพุฑูุณูโูุง Next.js

**ฺฏุฒูู A: ุงุณุชูุงุฏู ุงุฒ Task Manager**
1. `Ctrl + Shift + Esc` ุฑุง ูุดุงุฑ ุฏูุฏ
2. ุจู ุชุจ **Details** ุจุฑูุฏ
3. ูพุฑูุณูโูุง `node.exe` ุฑุง ูพุฏุง ฺฉูุฏ
4. ูพุฑูุณูโูุง ฺฉู ูุฑุจูุท ุจู Next.js ูุณุชูุฏ ุฑุง **End Task** ฺฉูุฏ

**ฺฏุฒูู B: ุงุณุชูุงุฏู ุงุฒ Command Prompt**
```cmd
# ุจุณุชู ุชูุงู ูพุฑูุณูโูุง node.exe
taskkill /F /IM node.exe

# ุง ุจุณุชู ูพุฑูุณู ุฎุงุต ุจุง PID
taskkill /F /PID <PID_NUMBER>
```

**ฺฏุฒูู C: ุงุณุชูุงุฏู ุงุฒ PowerShell**
```powershell
# ูพุฏุง ฺฉุฑุฏู ูพุฑูุณูโูุง Next.js
Get-Process node | Where-Object {$_.Path -like "*your-project-path*"}

# ุจุณุชู ูพุฑูุณูโูุง
Get-Process node | Where-Object {$_.Path -like "*your-project-path*"} | Stop-Process -Force
```

#### ูุฑุญูู 2: ุญุฐู ูุงู lock

```cmd
# ุญุฐู ูุงู lock
del /F /Q ".next\dev\lock"

# ุง ุญุฐู ฺฉู ูพูุดู .next
rmdir /S /Q ".next"
```

#### ูุฑุญูู 3: ูพุงฺฉ ฺฉุฑุฏู cache

```bash
pnpm clean-cache
```

---

## ๐ ุชุดุฎุต ูุดฺฉู

### ุจุฑุฑุณ ูพุฑูุณูโูุง ุฏุฑ ุญุงู ุงุฌุฑุง

```cmd
# ูุณุช ุชูุงู ูพุฑูุณูโูุง node.exe
tasklist /FI "IMAGENAME eq node.exe"

# ุง ุจุง ุฌุฒุฆุงุช ุจุดุชุฑ
wmic process where "name='node.exe'" get ProcessId,CommandLine
```

### ุจุฑุฑุณ ูุงูโูุง ููู ุดุฏู

```powershell
# ุจุฑุฑุณ ูุงูโูุง ููู ุดุฏู ุฏุฑ ูพูุดู .next
Get-ChildItem -Path ".next" -Recurse | Where-Object {
    $_.IsReadOnly -or (Test-Path $_.FullName -PathType Leaf)
}
```

---

## ๐ ูุดฺฉูุงุช ุฑุงุฌ ู ุฑุงูโุญูโูุง

### ูุดฺฉู 1: ุฎุทุง EPERM ุญุช ูพุณ ุงุฒ ุจุณุชู ูพุฑูุณูโูุง

**ุฑุงูโุญู:**
```bash
# 1. ุจุณุชู ุชูุงู terminal ูุง ุจุงุฒ
# 2. ุงุฌุฑุง ุฏุณุชูุฑ ุฒุฑ ุฏุฑ Command Prompt ุจุง Run as Administrator
taskkill /F /IM node.exe

# 3. ุญุฐู ุฏุณุช ูพูุดู .next
rmdir /S /Q ".next"

# 4. ุงุฌุฑุง ูุฌุฏุฏ
pnpm dev
```

### ูุดฺฉู 2: ูุงู lock ููโุชูุงูุฏ ุญุฐู ุดูุฏ

**ุฑุงูโุญู:**
```cmd
# ุชุบุฑ permission ูุงู
icacls ".next\dev\lock" /grant Everyone:F

# ุณูพุณ ุญุฐู
del /F /Q ".next\dev\lock"
```

### ูุดฺฉู 3: ูพูุดู .next ููโุชูุงูุฏ ุญุฐู ุดูุฏ

**ุฑุงูโุญู:**
```cmd
# ุงุณุชูุงุฏู ุงุฒ takeown ุจุฑุง ฺฏุฑูุชู ownership
takeown /F ".next" /R /D Y

# ุณูพุณ ุญุฐู
rmdir /S /Q ".next"
```

### ูุดฺฉู 4: ุฎุทุง ุฏุฑ PowerShell

**ุฑุงูโุญู:**
```powershell
# ุชุบุฑ Execution Policy (ููุท ฺฉ ุจุงุฑ)
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser

# ุณูพุณ ุงุฌุฑุง ูุฌุฏุฏ ุงุณฺฉุฑูพุช
pnpm kill-next
```

---

## ๐ ฺฺฉโูุณุช ุฑูุน ูุดฺฉู

ูุจู ุงุฒ ุงุฌุฑุง ูพุฑูฺูุ ูุทูุฆู ุดูุฏ:

- [ ] ุชูุงู terminal ูุง ุจุงุฒ ุจุณุชู ุดุฏูโุงูุฏ
- [ ] ูพุฑูุณูโูุง Next.js ุจุณุชู ุดุฏูโุงูุฏ (`pnpm kill-next`)
- [ ] ูุงู `.next\dev\lock` ุญุฐู ุดุฏู ุงุณุช
- [ ] Cache ูพุงฺฉ ุดุฏู ุงุณุช (`pnpm clean-cache`)
- [ ] ูพูุดู `.next` ุญุฐู ุดุฏู ุงุณุช (ุฏุฑ ุตูุฑุช ูุงุฒ)

---

## ๐๏ธ ุงุณฺฉุฑูพุชโูุง ููุฌูุฏ

### 1. `pnpm kill-next`
ุจุณุชู ุฎูุฏฺฉุงุฑ ุชูุงู ูพุฑูุณูโูุง Next.js

### 2. `pnpm clean-cache`
ูพุงฺฉ ฺฉุฑุฏู cache ุจุง ูุฏุฑุช ุฎุทุงูุง Permission

### 3. `pnpm fix-runtime`
ุฑูุน ุชูุงู ูุดฺฉูุงุช Runtime (ุดุงูู ูพุงฺฉ ฺฉุฑุฏู cache)

---

## ๐ก ูฺฉุงุช ููู

1. **ููุดู ูุจู ุงุฒ ูพุงฺฉ ฺฉุฑุฏู cacheุ ูพุฑูุณูโูุง Next.js ุฑุง ุจุจูุฏุฏ**
2. **ุงฺฏุฑ ุงุฒ VS Code ุงุณุชูุงุฏู ูโฺฉูุฏุ terminal ูุง ุฏุงุฎู ุฑุง ูู ุจุจูุฏุฏ**
3. **ุฏุฑ ุตูุฑุช ูุงุฒุ Command Prompt ุฑุง ุจุง Run as Administrator ุงุฌุฑุง ฺฉูุฏ**
4. **ูุงูโูุง lock ูุนูููุงู ูพุณ ุงุฒ ุจุณุชู ูพุฑูุณูโูุง ุจู ุฑุงุญุช ุญุฐู ูโุดููุฏ**

---

## ๐ ูพุดฺฏุฑ ุงุฒ ูุดฺฉู

ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุจุฑูุฒ ุงู ูุดฺฉู:

1. **ููุดู ูุจู ุงุฒ ุจุณุชู terminalุ ูพุฑูุณู Next.js ุฑุง ุจุง `Ctrl+C` ูุชููู ฺฉูุฏ**
2. **ุงุฒ ุงุณฺฉุฑูพุช `kill-next` ูุจู ุงุฒ ูพุงฺฉ ฺฉุฑุฏู cache ุงุณุชูุงุฏู ฺฉูุฏ**
3. **ุงุฒ Task Manager ุจุฑุง ุจุฑุฑุณ ูพุฑูุณูโูุง ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุชูุงุฏู ฺฉูุฏ**

---

## ๐ ูพุดุชุจุงู

ุงฺฏุฑ ูพุณ ุงุฒ ุงุนูุงู ุงู ุฑุงูโุญูโูุง ูููุฒ ูุดฺฉู ุฏุงุฑุฏ:

1. **ุจุฑุฑุณ ูุงฺฏโูุง:** ุฎุทุงูุง ุฏูู ุฑุง ุฏุฑ console ุจุฑุฑุณ ฺฉูุฏ
2. **ุจุฑุฑุณ Task Manager:** ูุทูุฆู ุดูุฏ ูฺ ูพุฑูุณู node.exe ุฏุฑ ุญุงู ุงุฌุฑุง ูุณุช
3. **ุงุฌุฑุง ุจุง Administrator:** Command Prompt ุฑุง ุจุง Run as Administrator ุงุฌุฑุง ฺฉูุฏ

---

## โ ุฎูุงุตู ุฏุณุชูุฑุงุช

```bash
# ุฑูุด ุณุฑุน (ูพุดููุงุฏ)
pnpm kill-next      # ุจุณุชู ูพุฑูุณูโูุง
pnpm clean-cache    # ูพุงฺฉ ฺฉุฑุฏู cache
pnpm dev            # ุงุฌุฑุง ูุฌุฏุฏ

# ุฑูุด ุฏุณุช (ุฏุฑ ุตูุฑุช ูุงุฒ)
taskkill /F /IM node.exe    # ุจุณุชู ุชูุงู ูพุฑูุณูโูุง node
rmdir /S /Q ".next"         # ุญุฐู ูพูุดู .next
pnpm clean-cache            # ูพุงฺฉ ฺฉุฑุฏู cache
```

---

**ูฺฉุชู ููู:** ุงู ูุดฺฉู ููุท ุฏุฑ development ุฑุฎ ูโุฏูุฏ ู ุจุฑ production ุชุฃุซุฑ ูุฏุงุฑุฏ. ูพุณ ุงุฒ ุจุณุชู ูพุฑูุณูโูุง ู ูพุงฺฉ ฺฉุฑุฏู cacheุ ูุดฺฉู ุจุงุฏ ุจุฑุทุฑู ุดูุฏ.

